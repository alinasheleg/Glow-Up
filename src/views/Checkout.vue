<template>
  <div class="min-h-screen bg-gray-50">
 
    
    <section class="max-w-7xl mx-auto px-4 py-12">
      <!-- Breadcrumbs -->
      <div class="mb-6 flex items-center gap-2 text-sm">
        <router-link to="/cart" class="text-gray-600 hover:text-pink-600">–ö–æ—Ä–∑–∏–Ω–∞</router-link>
        <span class="text-gray-400">‚Üí</span>
        <span class="text-pink-600 font-medium">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</span>
      </div>

      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-8">üõçÔ∏è –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>

      <div class="grid lg:grid-cols-3 gap-8">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –§–æ—Ä–º–∞ -->
        <div class="lg:col-span-2 space-y-6">
          <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
          <div class="bg-white rounded-xl p-6 shadow-md">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
              <span>üë§</span> –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            </h2>
            <div class="space-y-4">
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    –ò–º—è *
                  </label>
                  <input 
                    v-model="orderForm.firstName"
                    type="text" 
                    required
                    placeholder="–í–∞—à–µ –∏–º—è"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    –§–∞–º–∏–ª–∏—è *
                  </label>
                  <input 
                    v-model="orderForm.lastName"
                    type="text" 
                    required
                    placeholder="–í–∞—à–∞ —Ñ–∞–º–∏–ª–∏—è"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                  />
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  –¢–µ–ª–µ—Ñ–æ–Ω *
                </label>
                <input 
                  v-model="orderForm.phone"
                  type="tel" 
                  required
                  placeholder="+7 (___) ___-__-__"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Email *
                </label>
                <input 
                  v-model="orderForm.email"
                  type="email" 
                  required
                  placeholder="example@email.com"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                />
                <p class="text-xs text-gray-500 mt-1">–ù–∞ —ç—Ç–æ—Ç email –ø—Ä–∏–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</p>
              </div>
            </div>
          </div>

          <!-- –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏ -->
          <div class="bg-white rounded-xl p-6 shadow-md">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
              <span>üöö</span> –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏
            </h2>
            <div class="space-y-3">
              <label 
                v-for="delivery in deliveryMethods" 
                :key="delivery.id"
                class="flex items-start gap-4 p-4 border-2 rounded-lg cursor-pointer transition"
                :class="orderForm.delivery === delivery.id ? 'border-pink-500 bg-pink-50' : 'border-gray-200 hover:border-pink-300'"
              >
                <input 
                  v-model="orderForm.delivery"
                  type="radio" 
                  :value="delivery.id"
                  class="mt-1"
                />
                <div class="flex-1">
                  <div class="flex items-center justify-between mb-1">
                    <span class="font-semibold">{{ delivery.name }}</span>
                    <span class="text-pink-600 font-bold">{{ delivery.price }} ‚Ç∏</span>
                  </div>
                  <p class="text-sm text-gray-600">{{ delivery.description }}</p>
                  <p class="text-xs text-gray-500 mt-1">–°—Ä–æ–∫: {{ delivery.time }}</p>
                </div>
              </label>
            </div>
          </div>

          <!-- –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ -->
          <div v-if="orderForm.delivery !== 'pickup'" class="bg-white rounded-xl p-6 shadow-md">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
              <span>üìç</span> –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏
            </h2>
            <div class="space-y-4">
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    –ì–æ—Ä–æ–¥ *
                  </label>
                  <select 
                    v-model="orderForm.city"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                  >
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                    <option value="astana">–ê—Å—Ç–∞–Ω–∞</option>
                    <option value="almaty">–ê–ª–º–∞—Ç—ã</option>
                    <option value="shymkent">–®—ã–º–∫–µ–Ω—Ç</option>
                    <option value="karaganda">–ö–∞—Ä–∞–≥–∞–Ω–¥–∞</option>
                    <option value="aktobe">–ê–∫—Ç–æ–±–µ</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    –ò–Ω–¥–µ–∫—Å
                  </label>
                  <input 
                    v-model="orderForm.zip"
                    type="text" 
                    placeholder="010000"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                  />
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  –£–ª–∏—Ü–∞ *
                </label>
                <input 
                  v-model="orderForm.street"
                  type="text" 
                  required
                  placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —É–ª–∏—Ü—ã"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                />
              </div>

              <div class="grid grid-cols-3 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    –î–æ–º *
                  </label>
                  <input 
                    v-model="orderForm.house"
                    type="text" 
                    required
                    placeholder="‚Ññ"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    –ö–≤–∞—Ä—Ç–∏—Ä–∞
                  </label>
                  <input 
                    v-model="orderForm.apartment"
                    type="text" 
                    placeholder="‚Ññ"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    –ü–æ–¥—ä–µ–∑–¥
                  </label>
                  <input 
                    v-model="orderForm.entrance"
                    type="text" 
                    placeholder="‚Ññ"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
                  />
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É
                </label>
                <textarea 
                  v-model="orderForm.comment"
                  rows="3"
                  placeholder="–£–∫–∞–∂–∏—Ç–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏, –∫–æ–¥ –¥–æ–º–æ—Ñ–æ–Ω–∞ –∏ –¥—Ä—É–≥–∏–µ –¥–µ—Ç–∞–ª–∏"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none resize-none"
                ></textarea>
              </div>
            </div>
          </div>

          <!-- –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã -->
          <div class="bg-white rounded-xl p-6 shadow-md">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
              <span>üí≥</span> –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
            </h2>
            <div class="space-y-3">
              <label 
                v-for="payment in paymentMethods" 
                :key="payment.id"
                class="flex items-start gap-4 p-4 border-2 rounded-lg cursor-pointer transition"
                :class="orderForm.payment === payment.id ? 'border-pink-500 bg-pink-50' : 'border-gray-200 hover:border-pink-300'"
              >
                <input 
                  v-model="orderForm.payment"
                  type="radio" 
                  :value="payment.id"
                  class="mt-1"
                />
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <span class="text-xl">{{ payment.icon }}</span>
                    <span class="font-semibold">{{ payment.name }}</span>
                  </div>
                  <p class="text-sm text-gray-600">{{ payment.description }}</p>
                </div>
              </label>
            </div>
          </div>

          <!-- –ü—Ä–æ–º–æ–∫–æ–¥ -->
          <div class="bg-white rounded-xl p-6 shadow-md">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
              <span>üéüÔ∏è</span> –ü—Ä–æ–º–æ–∫–æ–¥
            </h2>
            <div class="flex gap-3">
              <input 
                v-model="promoCode"
                type="text" 
                placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥"
                class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"
              />
              <button 
                @click="applyPromoCode"
                class="px-6 py-3 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition font-medium"
              >
                –ü—Ä–∏–º–µ–Ω–∏—Ç—å
              </button>
            </div>
            <p v-if="promoApplied" class="text-green-600 text-sm mt-2">‚úì –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω! –°–∫–∏–¥–∫–∞ 10%</p>
          </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –ò—Ç–æ–≥–æ -->
        <div class="lg:col-span-1">
          <div class="bg-white rounded-xl p-6 shadow-md sticky top-24">
            <h2 class="text-xl font-bold mb-4">–í–∞—à –∑–∞–∫–∞–∑</h2>
            
            <!-- –¢–æ–≤–∞—Ä—ã -->
            <div class="space-y-3 mb-4 max-h-60 overflow-y-auto">
              <div v-for="item in cartItems" :key="item.id" class="flex gap-3 pb-3 border-b">
                <div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center">
                  <span class="text-2xl">{{ item.icon }}</span>
                </div>
                <div class="flex-1">
                  <h3 class="font-medium text-sm">{{ item.name }}</h3>
                  <p class="text-xs text-gray-500">{{ item.brand }}</p>
                  <div class="flex justify-between items-center mt-1">
                    <span class="text-xs text-gray-600">{{ item.quantity }} —à—Ç</span>
                    <span class="font-bold text-sm">{{ item.price }} ‚Ç∏</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- –†–∞—Å—á–µ—Ç -->
            <div class="space-y-2 py-4 border-t">
              <div class="flex justify-between text-sm">
                <span class="text-gray-600">–¢–æ–≤–∞—Ä—ã ({{ totalItems }} —à—Ç):</span>
                <span class="font-semibold">{{ subtotal }} ‚Ç∏</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-600">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                <span class="font-semibold">{{ deliveryCost }} ‚Ç∏</span>
              </div>
              <div v-if="promoApplied" class="flex justify-between text-sm text-green-600">
                <span>–°–∫–∏–¥–∫–∞:</span>
                <span class="font-semibold">-{{ discount }} ‚Ç∏</span>
              </div>
            </div>

            <!-- –ò—Ç–æ–≥–æ -->
            <div class="border-t pt-4 mb-6">
              <div class="flex justify-between items-center">
                <span class="text-lg font-bold">–ò—Ç–æ–≥–æ:</span>
                <span class="text-2xl font-bold text-pink-600">{{ total }} ‚Ç∏</span>
              </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è -->
            <button 
              @click="submitOrder"
              class="w-full bg-pink-600 text-white py-4 rounded-lg hover:bg-pink-700 transition font-bold text-lg mb-4"
            >
              –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
            </button>

            <div class="text-xs text-gray-500 text-center">
              –ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å 
              <a href="#" class="text-pink-600 hover:underline">—É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
            </div>

            <!-- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å -->
            <div class="mt-6 p-4 bg-green-50 rounded-lg">
              <div class="flex items-center gap-2 text-sm text-green-700">
                <span class="text-xl">üîí</span>
                <span class="font-medium">–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞</span>
              </div>
              <p class="text-xs text-gray-600 mt-1">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã SSL-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º</p>
            </div>
          </div>
        </div>
      </div>
    </section>
    
 
  </div>
</template>

<script>


export default {
  name: 'Checkout',
  components: {
  
  },
  data() {
    return {
      orderForm: {
        firstName: '',
        lastName: '',
        phone: '',
        email: '',
        delivery: 'courier',
        city: '',
        zip: '',
        street: '',
        house: '',
        apartment: '',
        entrance: '',
        comment: '',
        payment: 'card'
      },
      promoCode: '',
      promoApplied: false,
      cartItems: [
        { id: 1, name: '–£–≤–ª–∞–∂–Ω—è—é—â–∏–π –∫—Ä–µ–º', brand: 'La Roche-Posay', price: 2890, quantity: 1, icon: '‚ú®' },
        { id: 2, name: '–¢—É—à—å –¥–ª—è —Ä–µ—Å–Ω–∏—Ü', brand: "L'Or√©al Paris", price: 1490, quantity: 2, icon: 'üíÑ' }
      ],
      deliveryMethods: [
        { id: 'courier', name: '–ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞', price: 1500, description: '–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É', time: '1-2 –¥–Ω—è' },
        { id: 'pickup', name: '–ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏', price: 800, description: '–°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –ø—É–Ω–∫—Ç–∞ CDEK', time: '2-5 –¥–Ω–µ–π' },
        { id: 'post', name: '–ü–æ—Å—Ç–∞–º–∞—Ç', price: 1000, description: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –≤—ã–¥–∞—á–∞', time: '2-5 –¥–Ω–µ–π' },
        { id: 'store', name: '–°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞', price: 0, description: '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ', time: '–≤ –¥–µ–Ω—å –∑–∞–∫–∞–∑–∞' }
      ],
      paymentMethods: [
        { id: 'card', name: '–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞', icon: 'üí≥', description: 'Visa, Mastercard, –ú–ò–†' },
        { id: 'kaspi', name: 'Kaspi QR', icon: 'üè¶', description: '–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Kaspi' },
        { id: 'cash', name: '–ù–∞–ª–∏—á–Ω—ã–º–∏', icon: 'üíµ', description: '–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞' },
        { id: 'wallet', name: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫', icon: 'üì±', description: '–°–ë–ü, –ÆMoney' }
      ]
    }
  },
  computed: {
    subtotal() {
      return this.cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0)
    },
    deliveryCost() {
      const method = this.deliveryMethods.find(d => d.id === this.orderForm.delivery)
      return method ? (this.subtotal >= 15000 ? 0 : method.price) : 0
    },
    discount() {
      return this.promoApplied ? Math.round(this.subtotal * 0.1) : 0
    },
    total() {
      return this.subtotal + this.deliveryCost - this.discount
    },
    totalItems() {
      return this.cartItems.reduce((sum, item) => sum + item.quantity, 0)
    }
  },
  methods: {
    applyPromoCode() {
      if (this.promoCode.toLowerCase() === 'glowup10') {
        this.promoApplied = true
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥')
      }
    },
    submitOrder() {
      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if (!this.orderForm.firstName || !this.orderForm.phone || !this.orderForm.email) {
        alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è')
        return
      }
      
      alert(`–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!\n–°—É–º–º–∞: ${this.total} ‚Ç∏\n–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏: ${this.orderForm.delivery}\n–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã: ${this.orderForm.payment}`)
      this.$router.push('/profile')
    }
  }
}
</script>